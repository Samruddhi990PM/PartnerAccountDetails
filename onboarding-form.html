<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account Setup â€” Strategy Cues</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STRATEGY CUES â€” BLACK & GOLD THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  /* Backgrounds */
  --bg:        #111111;
  --bg2:       #1a1a1a;
  --bg3:       #222222;

  /* Cards */
  --card:      #1e1e1e;
  --card2:     #252525;
  --card3:     #2a2a2a;

  /* Gold palette */
  --gold:      #d4a843;
  --gold-h:    #c09030;
  --gold-dim:  #8a6a20;
  --gold-pale: #f5e8c0;
  --gold-bg:   rgba(212,168,67,.08);
  --gold-border: rgba(212,168,67,.25);

  /* Text */
  --text:      #f0ead8;
  --text2:     #b8b0a0;
  --text3:     #6a6050;

  /* Inputs */
  --inp-bg:    #2a2a2a;
  --inp-border:#3a3530;
  --inp-focus: var(--gold);

  /* Accent cells */
  --cell-bg:   #242424;

  /* Status */
  --red:       #e05040;
  --wa:        #25a244;

  /* Shadows */
  --sh-sm: 0 1px 4px rgba(0,0,0,.4);
  --sh-md: 0 4px 20px rgba(0,0,0,.5);
  --sh-lg: 0 16px 48px rgba(0,0,0,.65);

  /* Radii */
  --r:  12px;
  --rs: 7px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  background-image:
    radial-gradient(ellipse 60% 35% at 85% 0%, rgba(212,168,67,.07) 0%, transparent 55%),
    radial-gradient(ellipse 40% 50% at 15% 100%, rgba(212,168,67,.04) 0%, transparent 55%);
  min-height: 100vh;
  padding: 48px 20px 80px;
  color: var(--text);
}

.wrap { max-width: 820px; margin: 0 auto; }

/* â”€â”€ Header â”€â”€ */
.header { margin-bottom: 32px; animation: fadeDown .5s ease both; }

.brandline {
  display: flex; align-items: center; gap: 12px;
  font-family: 'Cormorant Garamond', serif;
  font-size: .72rem; font-weight: 600;
  letter-spacing: .24em; text-transform: uppercase;
  color: var(--gold); margin-bottom: 20px; opacity: .9;
}
.brandline::before, .brandline::after {
  content: ''; flex: 1; height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
}

.header h1 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 2.4rem; font-weight: 700;
  color: var(--text); line-height: 1.12;
  letter-spacing: -.01em; margin-bottom: 12px;
}
.header h1 em { font-style: normal; color: var(--gold); }
.header p { color: var(--text2); font-size: .91rem; line-height: 1.65; max-width: 560px; font-weight: 300; }

/* â”€â”€ Admin bar â”€â”€ */
.admin-bar {
  background: var(--gold-bg);
  border: 1px solid var(--gold-border);
  border-radius: var(--rs);
  padding: 12px 18px; margin-bottom: 20px;
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px; flex-wrap: wrap;
  animation: fadeDown .4s ease .06s both;
}
.admin-lbl {
  display: flex; align-items: center; gap: 8px;
  font-size: .8rem; font-weight: 500; color: var(--text2);
}
.admin-lbl svg { color: var(--gold); flex-shrink: 0; }
.admin-acts { display: flex; gap: 8px; flex-wrap: wrap; }

/* â”€â”€ Buttons â”€â”€ */
.btn {
  display: inline-flex; align-items: center; gap: 6px;
  border: none; border-radius: var(--rs);
  font-family: 'DM Sans', sans-serif; font-weight: 600;
  cursor: pointer; transition: all .18s ease;
}
.btn-gold  { background: var(--gold); color: #111; font-size: .8rem; padding: 7px 15px; }
.btn-gold:hover { background: var(--gold-h); transform: translateY(-1px); }
.btn-outline { background: transparent; border: 1px solid var(--gold-border); color: var(--text2); font-size: .8rem; padding: 7px 14px; }
.btn-outline:hover { background: var(--gold-bg); border-color: var(--gold-dim); }
.btn-dark  { background: var(--card3); color: var(--text2); font-size: .8rem; padding: 7px 14px; border: 1px solid var(--inp-border); }
.btn-dark:hover { background: #333; color: var(--text); }
.btn-next  { background: var(--gold); color: #111; font-size: .87rem; padding: 11px 18px; border-radius: var(--rs); white-space: nowrap; }
.btn-next:hover { background: var(--gold-h); }
.btn-add   { background: var(--card3); color: var(--text2); font-size: .79rem; padding: 8px 14px; border-radius: var(--rs); border: 1px solid var(--inp-border); }
.btn-add:hover { background: var(--gold-bg); border-color: var(--gold-dim); color: var(--gold-pale); }
.btn-submit {
  background: var(--gold); color: #111;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.1rem; font-weight: 700;
  padding: 13px 48px; border-radius: var(--rs);
  letter-spacing: .05em;
  box-shadow: 0 4px 20px rgba(212,168,67,.3);
  margin-top: 8px;
}
.btn-submit:hover { background: var(--gold-h); transform: translateY(-2px); box-shadow: 0 8px 28px rgba(212,168,67,.4); }
.btn-submit:disabled { background: var(--gold-dim); cursor: not-allowed; transform: none; box-shadow: none; }
.btn-remove {
  background: none; border: none; color: var(--text3);
  cursor: pointer; padding: 4px 7px; font-size: 1.1rem;
  transition: color .15s; display: flex; align-items: center; border-radius: 4px;
}
.btn-remove:hover { color: var(--red); background: rgba(224,80,64,.1); }

/* â”€â”€ Cards â”€â”€ */
.card {
  background: var(--card); border-radius: var(--r);
  border: 1px solid var(--inp-border);
  padding: 26px 28px; margin-bottom: 16px;
  box-shadow: var(--sh-md);
  animation: fadeUp .45s ease both;
}
.card:nth-child(2) { animation-delay: .07s; }
.card:nth-child(3) { animation-delay: .13s; }
.card:nth-child(4) { animation-delay: .19s; }

.card-hdr {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 18px; gap: 10px; flex-wrap: wrap;
}
.card-hdr h2 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.18rem; font-weight: 600; color: var(--text);
  letter-spacing: .01em;
}

/* â”€â”€ Info box â”€â”€ */
.info-box {
  background: rgba(212,168,67,.07);
  border: 1px solid rgba(212,168,67,.2);
  border-radius: var(--rs); padding: 12px 16px;
  display: flex; gap: 12px; align-items: flex-start;
  margin-bottom: 18px; font-size: .84rem;
  color: #c8b88a; line-height: 1.55;
}
.info-dot {
  width: 22px; height: 22px; background: var(--gold);
  border-radius: 50%; display: flex; align-items: center;
  justify-content: center; flex-shrink: 0;
  font-size: .72rem; font-weight: 700; color: #111; margin-top: 1px;
}

/* â”€â”€ Labels â”€â”€ */
.lbl {
  display: flex; align-items: center; gap: 6px;
  font-size: .76rem; font-weight: 600; color: var(--text2);
  margin-bottom: 8px; text-transform: uppercase; letter-spacing: .08em;
}
.req { color: var(--red); }

/* â”€â”€ Tooltip â”€â”€ */
.tip-wrap { position: relative; display: inline-flex; align-items: center; }
.tip-icon {
  width: 15px; height: 15px; background: var(--gold);
  border-radius: 50%; display: inline-flex;
  align-items: center; justify-content: center;
  font-size: .6rem; font-weight: 700; color: #111;
  cursor: help; transition: background .15s;
}
.tip-icon:hover { background: var(--gold-h); }
.tip-bubble {
  display: none; position: absolute;
  bottom: calc(100% + 8px); left: 50%; transform: translateX(-50%);
  background: #1a1a1a; border: 1px solid var(--gold-border);
  color: var(--text2); font-size: .77rem; font-weight: 400;
  padding: 9px 13px; border-radius: var(--rs);
  width: 230px; line-height: 1.5; z-index: 200;
  pointer-events: none; box-shadow: var(--sh-lg);
}
.tip-bubble::after {
  content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
  border: 5px solid transparent; border-top-color: var(--gold-border);
}
.tip-icon:hover + .tip-bubble { display: block; }

/* â”€â”€ Base inputs â”€â”€ */
input[type="text"], input[type="email"],
input[type="tel"],  input[type="password"] {
  font-family: 'DM Sans', sans-serif; font-size: .9rem;
  color: var(--text); background: var(--inp-bg);
  border: 1.5px solid var(--inp-border); outline: none;
  transition: border-color .18s, box-shadow .18s;
}
input[type="text"]:focus, input[type="email"]:focus,
input[type="tel"]:focus,  input[type="password"]:focus {
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(212,168,67,.12);
}
input::placeholder { color: var(--text3); }

/* â”€â”€ Email row â”€â”€ */
.email-row { display: flex; gap: 12px; align-items: flex-start; }
.email-row input { flex: 1; padding: 11px 14px; border-radius: var(--rs); }

/* â”€â”€ Segmented contact rows (icon | name | â€º | number | [lock]) â”€â”€ */
.seg-row {
  display: flex; align-items: stretch;
  margin-bottom: 8px; border-radius: var(--rs);
  overflow: hidden; box-shadow: var(--sh-sm);
}
.seg-icon-cell {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border); border-right: none;
  padding: 0 12px; display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; width: 44px;
}
.seg-name-inp {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border);
  border-left: none; border-right: none;
  padding: 10px 12px; width: 130px; flex-shrink: 0;
}
.seg-arr {
  background: var(--cell-bg); border-top: 1.5px solid var(--inp-border);
  border-bottom: 1.5px solid var(--inp-border);
  padding: 0 8px; display: flex; align-items: center;
  color: var(--text3); font-size: .82rem; flex-shrink: 0;
}
.seg-num-inp {
  flex: 1; border: 1.5px solid var(--inp-border); border-left: none;
  padding: 10px 12px;
}
.seg-num-inp.no-rr { border-right: none; border-radius: 0; }
.seg-lock-cell {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border); border-left: none;
  padding: 0 12px; display: flex; align-items: center;
  cursor: pointer; color: var(--text3); transition: color .15s; flex-shrink: 0;
}
.seg-lock-cell:hover { color: var(--gold); }

.seg-row > *:first-child { border-radius: var(--rs) 0 0 var(--rs) !important; }
.seg-row > *:last-child  { border-radius: 0 var(--rs) var(--rs) 0 !important; }

/* â”€â”€ Divider â”€â”€ */
hr.div { border: none; border-top: 1px solid var(--inp-border); margin: 20px 0; }

/* â”€â”€ Credentials table â”€â”€ */
.cred-lbl-row {
  display: grid; grid-template-columns: 190px 1fr 1fr 44px;
  margin-bottom: 5px; padding: 0 2px;
}
.cred-lbl-cell {
  font-size: .71rem; font-weight: 600; color: var(--text3);
  text-transform: uppercase; letter-spacing: .07em; padding: 0 10px;
}
.cred-row {
  display: grid; grid-template-columns: 190px 1fr 1fr 44px;
  margin-bottom: 5px; border-radius: var(--rs);
  overflow: hidden; box-shadow: var(--sh-sm);
}
.cred-plat {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border); border-right: none;
  padding: 10px 14px; display: flex; align-items: center; justify-content: space-between;
  font-size: .87rem; font-weight: 500; color: var(--text);
  border-radius: var(--rs) 0 0 var(--rs);
}
.cred-plat span { color: var(--text3); font-size: .75rem; }
.cred-plat-inp {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border); border-right: none;
  padding: 10px 14px; font-size: .87rem;
  border-radius: var(--rs) 0 0 var(--rs);
}
.cred-inp {
  border: 1.5px solid var(--inp-border); border-left: none; border-right: none;
  padding: 10px 12px;
}
.cred-lock {
  background: var(--cell-bg); border: 1.5px solid var(--inp-border); border-left: none;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--text3); transition: color .15s;
  border-radius: 0 var(--rs) var(--rs) 0;
}
.cred-lock:hover { color: var(--gold); }

/* â”€â”€ Modal / overlay â”€â”€ */
.overlay {
  display: none; position: fixed; inset: 0;
  background: rgba(0,0,0,.82); backdrop-filter: blur(5px);
  z-index: 1000; align-items: center; justify-content: center; padding: 20px;
}
.overlay.open { display: flex; }
.modal {
  background: var(--card); border: 1px solid var(--inp-border);
  border-radius: var(--r); padding: 30px; width: 100%; max-width: 480px;
  box-shadow: var(--sh-lg); animation: scaleIn .22s ease;
}
.modal h3 {
  font-family: 'Cormorant Garamond', serif; font-size: 1.25rem; font-weight: 600;
  color: var(--text); margin-bottom: 6px;
}
.modal > p { font-size: .84rem; color: var(--text2); margin-bottom: 22px; line-height: 1.55; }
.mf { margin-bottom: 14px; }
.mf label {
  display: block; font-size: .74rem; font-weight: 600; color: var(--text2);
  text-transform: uppercase; letter-spacing: .07em; margin-bottom: 5px;
}
.mf input { width: 100%; padding: 10px 12px; border-radius: var(--rs); }
.modal-foot { display: flex; gap: 10px; justify-content: flex-end; margin-top: 22px; }
.btn-mc {
  background: transparent; border: 1.5px solid var(--inp-border);
  border-radius: var(--rs); padding: 9px 18px;
  font-family: 'DM Sans', sans-serif; font-size: .86rem;
  color: var(--text2); cursor: pointer; transition: all .15s;
}
.btn-mc:hover { background: var(--card3); }
.btn-ms {
  background: var(--gold); color: #111; border: none;
  border-radius: var(--rs); padding: 9px 22px;
  font-family: 'DM Sans', sans-serif; font-size: .86rem; font-weight: 600;
  cursor: pointer; transition: all .15s;
}
.btn-ms:hover { background: var(--gold-h); }

/* â”€â”€ Success card â”€â”€ */
.success-card {
  background: var(--card); border: 1px solid var(--inp-border);
  border-radius: var(--r); padding: 44px 36px; text-align: center;
  max-width: 460px; width: 100%;
  box-shadow: var(--sh-lg); animation: scaleIn .28s ease;
}
.success-ring {
  width: 70px; height: 70px;
  background: linear-gradient(135deg, var(--gold), var(--gold-h));
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  margin: 0 auto 22px; font-size: 2rem; color: #111;
}
.success-card h2 {
  font-family: 'Cormorant Garamond', serif; font-size: 1.5rem;
  color: var(--text); margin-bottom: 12px;
}
.success-card p { color: var(--text2); font-size: .91rem; line-height: 1.65; margin-bottom: 8px; }
.success-note { font-size: .78rem !important; color: var(--text3) !important; margin-bottom: 24px !important; }

/* â”€â”€ Spinner â”€â”€ */
.spinner {
  display: inline-block; width: 14px; height: 14px;
  border: 2px solid rgba(17,17,17,.3); border-top-color: #111;
  border-radius: 50%; animation: spin .6s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€ Toast flash â”€â”€ */
.flash {
  position: fixed; bottom: 26px; left: 50%; transform: translateX(-50%);
  background: var(--card3); border: 1px solid var(--inp-border);
  color: var(--text); padding: 11px 24px; border-radius: var(--rs);
  font-size: .85rem; font-weight: 500; z-index: 9999;
  box-shadow: var(--sh-md); animation: fadeUp .3s ease;
  white-space: nowrap;
}

/* â”€â”€ Animations â”€â”€ */
@keyframes fadeDown { from { opacity:0; transform:translateY(-14px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeUp   { from { opacity:0; transform:translateY(16px);  } to { opacity:1; transform:translateY(0); } }
@keyframes scaleIn  { from { opacity:0; transform:scale(.93); }        to { opacity:1; transform:scale(1); } }

/* â”€â”€ Responsive â”€â”€ */
@media (max-width: 620px) {
  .header h1 { font-size: 1.8rem; }
  .card { padding: 20px 16px; }
  .cred-lbl-row, .cred-row { grid-template-columns: 1fr 1fr 44px; }
  .cred-plat, .cred-plat-inp { display: none; }
  .email-row { flex-direction: column; }
  .admin-bar { flex-direction: column; align-items: flex-start; }
}
</style>
</head>
<body>

<!-- â•â•â• SETUP MODAL â•â•â• -->
<!-- NOTE TO DEPLOYER: Replace EMAILJS_PUBLIC_KEY, EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID below -->

<!-- â•â•â• PRE-FILL MODAL â•â•â• -->
<div class="overlay" id="modal-prefill">
  <div class="modal">
    <h3>Pre-fill Contact Information</h3>
    <p>Set default values before sharing the form with your customer. They can still edit all fields before submitting.</p>
    <div class="mf"><label>Name (Phone Contact)</label><input type="text" id="pre-pname" placeholder="e.g. Riya"></div>
    <div class="mf"><label>Phone Number</label><input type="tel" id="pre-pnum" placeholder="e.g. +971 528771983"></div>
    <div class="mf"><label>Our WhatsApp â€” Name 1</label><input type="text" id="pre-w1name" placeholder="e.g. Devina"></div>
    <div class="mf"><label>Our WhatsApp â€” Number 1</label><input type="tel" id="pre-w1num" placeholder="e.g. +918899078882"></div>
    <div class="modal-foot">
      <button class="btn-mc" onclick="closeOv('modal-prefill')">Cancel</button>
      <button class="btn-ms" onclick="applyPrefill()">Save &amp; Apply</button>
    </div>
  </div>
</div>

<!-- â•â•â• EMAIL SETTINGS MODAL â•â•â• -->
<div class="overlay" id="modal-email">
  <div class="modal">
    <h3>Notification Email Settings</h3>
    <p>Update the email address that receives all form submission details in a tabular summary.</p>
    <div class="mf"><label>Recipient Email Address</label><input type="email" id="notif-email" value="samruddhi.waghchaure@strategycues.com"></div>
    <div class="modal-foot">
      <button class="btn-mc" onclick="closeOv('modal-email')">Cancel</button>
      <button class="btn-ms" onclick="saveEmail()">Save Email</button>
    </div>
  </div>
</div>

<!-- â•â•â• EMAILJS SETUP MODAL â•â•â• -->
<div class="overlay" id="modal-setup">
  <div class="modal">
    <h3>Email Service Setup</h3>
    <p>To send real emails, enter your <strong style="color:var(--gold)">EmailJS</strong> credentials. Sign up free at <a href="https://emailjs.com" target="_blank" style="color:var(--gold)">emailjs.com</a> â€” it takes 2 minutes and 200 free emails/month.</p>
    <div class="mf"><label>Public Key</label><input type="text" id="ejs-pubkey" placeholder="e.g. abc123XYZ..."></div>
    <div class="mf"><label>Service ID</label><input type="text" id="ejs-service" placeholder="e.g. service_xxxxxxx"></div>
    <div class="mf"><label>Template ID</label><input type="text" id="ejs-template" placeholder="e.g. template_xxxxxxx"></div>
    <p style="font-size:.77rem;color:var(--text3);margin-top:10px">In your EmailJS template, use these variables: <code style="color:var(--gold)">{{to_email}}</code>, <code style="color:var(--gold)">{{subject}}</code>, <code style="color:var(--gold)">{{message}}</code></p>
    <div class="modal-foot">
      <button class="btn-mc" onclick="closeOv('modal-setup')">Cancel</button>
      <button class="btn-ms" onclick="saveEJSConfig()">Save Config</button>
    </div>
  </div>
</div>

<!-- â•â•â• SUCCESS OVERLAY â•â•â• -->
<div class="overlay" id="overlay-success">
  <div class="success-card">
    <div class="success-ring">âœ“</div>
    <h2>You're all set!</h2>
    <p>Thanks for sharing the details! Your onboarding kicks off in 48 hoursâ€”we're excited to get started with you ðŸŽ‰</p>
    <p class="success-note" id="success-note"></p>
    <button class="btn btn-gold" style="margin:0 auto;padding:11px 28px;font-size:.9rem;" onclick="closeOv('overlay-success')">Close</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PAGE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="wrap">

  <div class="header">
    <div class="brandline">Strategy Cues</div>
    <h1>Account Setup <em>Information</em></h1>
    <p>Please provide the required details to ensure seamless onboarding and account setup. Fill in the information below to get started.</p>
  </div>

  <!-- Admin bar -->
  <div class="admin-bar">
    <div class="admin-lbl">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
      Admin controls â€” pre-fill &amp; configure before sharing with customer
    </div>
    <div class="admin-acts">
      <button class="btn btn-gold" onclick="openOv('modal-prefill')">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
        Pre-fill Contact Info
      </button>
      <button class="btn btn-dark" onclick="openOv('modal-email')">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
        Email Settings
      </button>
      <button class="btn btn-outline" onclick="openOv('modal-setup')">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="3"/><path d="M19.07 4.93l-1.41 1.41M4.93 4.93l1.41 1.41M19.07 19.07l-1.41-1.41M4.93 19.07l1.41-1.41M12 2v2M12 20v2M2 12h2M20 12h2"/></svg>
        Email API Setup
      </button>
      <button class="btn btn-outline" onclick="clearAll()">Clear All</button>
    </div>
  </div>

  <!-- â”€â”€ Card 1: Official Email â”€â”€ -->
  <div class="card">
    <div class="card-hdr"><h2>Official Email ID for Onboarding</h2></div>
    <div class="info-box">
      <div class="info-dot">i</div>
      <span>Please create an official email ID within your organization's domain and provide it below for seamless onboarding.</span>
    </div>
    <div class="lbl">
      Official Email ID <span class="req">*</span>
      <span class="tip-wrap" style="margin-left:2px">
        <span class="tip-icon">i</span>
        <span class="tip-bubble">Use your organization's domain email (e.g. you@yourcompany.com). Personal emails like Gmail are not accepted.</span>
      </span>
    </div>
    <div class="email-row">
      <input type="email" id="official-email" placeholder="example@yourcompany.com">
      <button class="btn btn-next" onclick="document.getElementById('section-contact').scrollIntoView({behavior:'smooth',block:'start'})">
        Next
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </button>
    </div>
  </div>

  <!-- â”€â”€ Card 2: Contact Information â”€â”€ -->
  <div class="card" id="section-contact">
    <div class="card-hdr"><h2>Contact Information</h2></div>

    <!-- Phone for Verification -->
    <div class="lbl">
      Phone Number for Verification Codes <span class="req">*</span>
      <span class="tip-wrap" style="margin-left:2px">
        <span class="tip-icon">i</span>
        <span class="tip-bubble">Please register this phone number for email verifications on your platform.</span>
      </span>
    </div>
    <div class="seg-row">
      <div class="seg-icon-cell">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#6a6050" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 014.9 13.6 19.79 19.79 0 011.87 5.09a2 2 0 012-2.18h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 10.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 17z"/></svg>
      </div>
      <input type="text" class="seg-name-inp" id="phone-name" placeholder="Name">
      <div class="seg-arr">â€º</div>
      <input type="tel" class="seg-num-inp" id="phone-number" placeholder="Phone number" value="+971 528771983">
    </div>

    <!-- Our WhatsApp Numbers -->
    <div class="lbl" style="margin-top:20px">Our WhatsApp Numbers for Communication</div>
    <div id="our-wa-list">
      <div class="seg-row wa-item">
        <div class="seg-icon-cell" style="background:var(--cell-bg);border:1.5px solid var(--inp-border);border-right:none"><svg width="14" height="14" viewBox="0 0 24 24" fill="#25a244"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"/><path d="M12 0C5.374 0 0 5.373 0 12c0 2.126.553 4.127 1.519 5.874L0 24l6.335-1.508A11.946 11.946 0 0012 24c6.626 0 12-5.374 12-12S18.626 0 12 0zm0 21.818a9.818 9.818 0 01-5.006-1.375l-.36-.214-3.727.978.995-3.636-.235-.374A9.817 9.817 0 012.182 12C2.182 6.579 6.579 2.182 12 2.182S21.818 6.579 21.818 12 17.421 21.818 12 21.818z"/></svg></div>
        <input type="text" class="seg-name-inp wa-name" placeholder="Name" value="Devina">
        <div class="seg-arr" style="background:var(--cell-bg);border-top:1.5px solid var(--inp-border);border-bottom:1.5px solid var(--inp-border)">â€º</div>
        <input type="tel" class="seg-num-inp no-rr wa-num" placeholder="+country code number" value="+918899078882">
        <div class="seg-lock-cell" onclick="toggleLock(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div>
      </div>
      <div class="seg-row wa-item">
        <div class="seg-icon-cell" style="background:var(--cell-bg);border:1.5px solid var(--inp-border);border-right:none"><svg width="14" height="14" viewBox="0 0 24 24" fill="#25a244"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"/><path d="M12 0C5.374 0 0 5.373 0 12c0 2.126.553 4.127 1.519 5.874L0 24l6.335-1.508A11.946 11.946 0 0012 24c6.626 0 12-5.374 12-12S18.626 0 12 0zm0 21.818a9.818 9.818 0 01-5.006-1.375l-.36-.214-3.727.978.995-3.636-.235-.374A9.817 9.817 0 012.182 12C2.182 6.579 6.579 2.182 12 2.182S21.818 6.579 21.818 12 17.421 21.818 12 21.818z"/></svg></div>
        <input type="text" class="seg-name-inp wa-name" placeholder="Name" value="Tejas">
        <div class="seg-arr" style="background:var(--cell-bg);border-top:1.5px solid var(--inp-border);border-bottom:1.5px solid var(--inp-border)">â€º</div>
        <input type="tel" class="seg-num-inp no-rr wa-num" placeholder="+country code number" value="+971 528771983">
        <div class="seg-lock-cell" onclick="toggleLock(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div>
      </div>
    </div>
    <button class="btn btn-add" onclick="addOurWA()">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
      Add Another Number
    </button>

    <hr class="div">

    <!-- Customer WhatsApp Numbers -->
    <div class="lbl">Your WhatsApp Numbers for Communication</div>
    <div id="your-wa-list">
      <div class="seg-row cust-wa-item">
        <div class="seg-icon-cell" style="background:var(--cell-bg);border:1.5px solid var(--inp-border);border-right:none"><svg width="14" height="14" viewBox="0 0 24 24" fill="#25a244"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"/><path d="M12 0C5.374 0 0 5.373 0 12c0 2.126.553 4.127 1.519 5.874L0 24l6.335-1.508A11.946 11.946 0 0012 24c6.626 0 12-5.374 12-12S18.626 0 12 0zm0 21.818a9.818 9.818 0 01-5.006-1.375l-.36-.214-3.727.978.995-3.636-.235-.374A9.817 9.817 0 012.182 12C2.182 6.579 6.579 2.182 12 2.182S21.818 6.579 21.818 12 17.421 21.818 12 21.818z"/></svg></div>
        <input type="text" class="seg-name-inp cust-name" placeholder="Name">
        <div class="seg-arr" style="background:var(--cell-bg);border-top:1.5px solid var(--inp-border);border-bottom:1.5px solid var(--inp-border)">â€º</div>
        <input type="tel" class="seg-num-inp cust-num" placeholder="+country code number">
      </div>
    </div>
    <button class="btn btn-add" onclick="addYourWA()">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
      Add Another Number
    </button>
  </div>

  <!-- â”€â”€ Card 3: Platform Login Credentials â”€â”€ -->
  <div class="card">
    <div class="card-hdr"><h2>Platform Login Credentials</h2></div>

    <div class="cred-lbl-row">
      <div class="cred-lbl-cell" style="padding-left:14px">Platform</div>
      <div class="cred-lbl-cell">Username</div>
      <div class="cred-lbl-cell">Password</div>
      <div></div>
    </div>

    <div id="platform-list">
      <div class="cred-row"><div class="cred-plat">Pricelabs <span>â€º</span></div><input type="text" class="cred-inp" placeholder="Username"><input type="password" class="cred-inp" placeholder="Password"><div class="cred-lock" onclick="togglePwd(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div></div>
      <div class="cred-row"><div class="cred-plat">Booking.com <span>â€º</span></div><input type="text" class="cred-inp" placeholder="Username"><input type="password" class="cred-inp" placeholder="Password"><div class="cred-lock" onclick="togglePwd(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div></div>
      <div class="cred-row"><div class="cred-plat">PMS <span>â€º</span></div><input type="text" class="cred-inp" placeholder="Username"><input type="password" class="cred-inp" placeholder="Password"><div class="cred-lock" onclick="togglePwd(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div></div>
      <div class="cred-row"><div class="cred-plat">Expedia <span>â€º</span></div><input type="text" class="cred-inp" placeholder="Username"><input type="password" class="cred-inp" placeholder="Password"><div class="cred-lock" onclick="togglePwd(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div></div>
      <div class="cred-row"><div class="cred-plat">VRBO <span>â€º</span></div><input type="text" class="cred-inp" placeholder="Username"><input type="password" class="cred-inp" placeholder="Password"><div class="cred-lock" onclick="togglePwd(this)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div></div>
    </div>

    <div style="display:flex;justify-content:flex-end;margin-top:10px">
      <button class="btn btn-add" onclick="addPlatform()">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
        Add Another Platform
      </button>
    </div>
  </div>

  <button class="btn btn-submit" id="submit-btn" onclick="submitForm()">Submit</button>

</div><!-- /.wrap -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• JS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€ State â”€â”€ */
let notifEmail = 'samruddhi.waghchaure@strategycues.com';
let ejsConfig = { publicKey: '', serviceId: '', templateId: '' };

/* Try load saved config */
try {
  const saved = JSON.parse(sessionStorage.getItem('ejs_cfg') || '{}');
  if (saved.publicKey) { ejsConfig = saved; emailjs.init({ publicKey: saved.publicKey }); }
} catch(e) {}

/* â”€â”€ Overlay helpers â”€â”€ */
function openOv(id)  { document.getElementById(id).classList.add('open'); }
function closeOv(id) { document.getElementById(id).classList.remove('open'); }

/* â”€â”€ Pre-fill â”€â”€ */
function applyPrefill() {
  const pn = g('pre-pname'), pp = g('pre-pnum'), w1n = g('pre-w1name'), w1p = g('pre-w1num');
  if (pn) document.getElementById('phone-name').value = pn;
  if (pp) document.getElementById('phone-number').value = pp;
  const rows = document.querySelectorAll('.wa-item');
  if (rows[0]) {
    if (w1n) rows[0].querySelector('.wa-name').value = w1n;
    if (w1p) rows[0].querySelector('.wa-num').value = w1p;
  }
  closeOv('modal-prefill');
  toast('Contact info pre-filled âœ“');
}

function saveEmail() {
  const e = g('notif-email');
  if (e) { notifEmail = e; toast('Notification email saved âœ“'); }
  closeOv('modal-email');
}

function saveEJSConfig() {
  const pk = g('ejs-pubkey'), sid = g('ejs-service'), tid = g('ejs-template');
  if (!pk || !sid || !tid) { toast('Please fill all three fields'); return; }
  ejsConfig = { publicKey: pk, serviceId: sid, templateId: tid };
  emailjs.init({ publicKey: pk });
  try { sessionStorage.setItem('ejs_cfg', JSON.stringify(ejsConfig)); } catch(e) {}
  closeOv('modal-setup');
  toast('EmailJS configured âœ“ â€” emails will now be sent automatically');
}

function clearAll() {
  ['official-email','phone-name','phone-number'].forEach(id => {
    const el = document.getElementById(id); if (el) el.value = '';
  });
  document.querySelectorAll('.wa-name,.wa-num,.cust-name,.cust-num,.cred-inp').forEach(el => el.value = '');
}

/* â”€â”€ WA rows â”€â”€ */
const WA_SVG = `<svg width="14" height="14" viewBox="0 0 24 24" fill="#25a244"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413z"/><path d="M12 0C5.374 0 0 5.373 0 12c0 2.126.553 4.127 1.519 5.874L0 24l6.335-1.508A11.946 11.946 0 0012 24c6.626 0 12-5.374 12-12S18.626 0 12 0zm0 21.818a9.818 9.818 0 01-5.006-1.375l-.36-.214-3.727.978.995-3.636-.235-.374A9.817 9.817 0 012.182 12C2.182 6.579 6.579 2.182 12 2.182S21.818 6.579 21.818 12 17.421 21.818 12 21.818z"/></svg>`;
const LOCK_SVG = `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>`;

function addOurWA() {
  const list = document.getElementById('our-wa-list');
  const d = document.createElement('div'); d.className = 'seg-row wa-item';
  d.innerHTML = `
    <div class="seg-icon-cell" style="background:var(--cell-bg);border:1.5px solid var(--inp-border);border-right:none">${WA_SVG}</div>
    <input type="text" class="seg-name-inp wa-name" placeholder="Name">
    <div class="seg-arr" style="background:var(--cell-bg);border-top:1.5px solid var(--inp-border);border-bottom:1.5px solid var(--inp-border)">â€º</div>
    <input type="tel" class="seg-num-inp no-rr wa-num" placeholder="+country code number">
    <div class="seg-lock-cell" onclick="toggleLock(this)">${LOCK_SVG}</div>
    <button class="btn-remove" onclick="this.closest('.wa-item').remove()" title="Remove">Ã—</button>`;
  list.appendChild(d); d.style.animation = 'fadeUp .25s ease'; d.querySelector('.wa-name').focus();
}

function addYourWA() {
  const list = document.getElementById('your-wa-list');
  const d = document.createElement('div'); d.className = 'seg-row cust-wa-item';
  d.innerHTML = `
    <div class="seg-icon-cell" style="background:var(--cell-bg);border:1.5px solid var(--inp-border);border-right:none">${WA_SVG}</div>
    <input type="text" class="seg-name-inp cust-name" placeholder="Name">
    <div class="seg-arr" style="background:var(--cell-bg);border-top:1.5px solid var(--inp-border);border-bottom:1.5px solid var(--inp-border)">â€º</div>
    <input type="tel" class="seg-num-inp cust-num" placeholder="+country code number">
    <button class="btn-remove" onclick="this.closest('.cust-wa-item').remove()" title="Remove">Ã—</button>`;
  list.appendChild(d); d.style.animation = 'fadeUp .25s ease'; d.querySelector('.cust-name').focus();
}

function addPlatform() {
  const list = document.getElementById('platform-list');
  const d = document.createElement('div'); d.className = 'cred-row';
  d.innerHTML = `
    <input type="text" class="cred-plat-inp" placeholder="Platform name">
    <input type="text" class="cred-inp" placeholder="Username">
    <input type="password" class="cred-inp" placeholder="Password">
    <div class="cred-lock" onclick="togglePwd(this)">${LOCK_SVG}</div>`;
  list.appendChild(d); d.style.animation = 'fadeUp .25s ease'; d.querySelector('input').focus();
}

function toggleLock(el) {
  const locked = el.dataset.locked !== '0';
  el.dataset.locked = locked ? '0' : '1';
  el.style.color = locked ? 'var(--gold)' : '';
  el.innerHTML = locked
    ? `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a3 3 0 016 0"/></svg>`
    : LOCK_SVG;
}

function togglePwd(el) {
  const row = el.closest('.cred-row');
  const inp = row.querySelector('input[type="password"],input[data-vis]');
  if (!inp) return;
  if (inp.type === 'password') { inp.type = 'text'; inp.dataset.vis = '1'; el.style.color = 'var(--gold)'; }
  else { inp.type = 'password'; delete inp.dataset.vis; el.style.color = ''; }
}

/* â”€â”€ Collect form data â”€â”€ */
function collect() {
  const data = {
    officialEmail: g('official-email'),
    phoneName:     g('phone-name'),
    phoneNumber:   g('phone-number'),
    ourWA: [], yourWA: [], platforms: []
  };
  document.querySelectorAll('.wa-item').forEach(r => {
    const n = r.querySelector('.wa-name')?.value||'', p = r.querySelector('.wa-num')?.value||'';
    if (n||p) data.ourWA.push({ name: n, number: p });
  });
  document.querySelectorAll('.cust-wa-item').forEach(r => {
    const n = r.querySelector('.cust-name')?.value||'', p = r.querySelector('.cust-num')?.value||'';
    if (n||p) data.yourWA.push({ name: n, number: p });
  });
  document.querySelectorAll('#platform-list .cred-row').forEach(r => {
    const platDiv = r.querySelector('.cred-plat');
    const platInp = r.querySelector('.cred-plat-inp');
    const inps    = r.querySelectorAll('.cred-inp');
    const platform = platDiv ? platDiv.textContent.replace('â€º','').trim() : (platInp?.value||'');
    const username = inps[0]?.value||'';
    const password = inps[1]?.value||'';
    if (platform) data.platforms.push({ platform, username, password });
  });
  return data;
}

/* â”€â”€ Build HTML email body (tabular) â”€â”€ */
function buildEmailHTML(d) {
  const row = (a, b, alt) => `<tr style="background:${alt?'#1e1e1e':'#252525'}"><td style="padding:10px 16px;font-weight:600;color:#b8b0a0;width:220px;border-bottom:1px solid #333">${a}</td><td style="padding:10px 16px;color:#f0ead8;border-bottom:1px solid #333">${b||'â€”'}</td></tr>`;
  const th   = t => `<tr><th colspan="2" style="background:#d4a843;color:#111;padding:10px 16px;text-align:left;font-size:13px;letter-spacing:.08em;text-transform:uppercase">${t}</th></tr>`;

  const waOurRows   = d.ourWA.length  ? d.ourWA.map((w,i)  => row(w.name||'â€”', w.number, i%2)).join('')  : row('(none)','',false);
  const waYourRows  = d.yourWA.length ? d.yourWA.map((w,i) => row(w.name||'â€”', w.number, i%2)).join('')  : row('(none)','',false);
  const platRows    = d.platforms.length
    ? d.platforms.map((p,i) => `<tr style="background:${i%2?'#1e1e1e':'#252525'}"><td style="padding:10px 16px;font-weight:600;color:#b8b0a0;border-bottom:1px solid #333">${p.platform}</td><td style="padding:10px 16px;color:#f0ead8;border-bottom:1px solid #333">${p.username||'â€”'}</td><td style="padding:10px 16px;color:#f0ead8;border-bottom:1px solid #333">${p.password||'â€”'}</td></tr>`).join('')
    : `<tr><td colspan="3" style="padding:10px 16px;color:#6a6050">â€”</td></tr>`;

  return `
<div style="font-family:'DM Sans',Arial,sans-serif;background:#111;color:#f0ead8;max-width:680px;margin:0 auto;border-radius:12px;overflow:hidden;border:1px solid #333">
  <div style="background:linear-gradient(135deg,#1a1a1a,#222);padding:28px 32px;border-bottom:2px solid #d4a843">
    <div style="font-size:11px;letter-spacing:.2em;text-transform:uppercase;color:#d4a843;margin-bottom:10px">Strategy Cues</div>
    <h2 style="margin:0;font-size:22px;font-weight:600;color:#f0ead8">New Onboarding Submission</h2>
    <p style="margin:6px 0 0;font-size:13px;color:#6a6050">Submitted: ${new Date().toLocaleString()}</p>
  </div>
  <div style="padding:24px 32px">
    <table style="width:100%;border-collapse:collapse;margin-bottom:24px;border-radius:8px;overflow:hidden;border:1px solid #333">
      ${th('General Information')}
      ${row('Official Email', d.officialEmail, false)}
      ${row('Phone Contact Name', d.phoneName, true)}
      ${row('Phone Number (Verification)', d.phoneNumber, false)}
    </table>
    <table style="width:100%;border-collapse:collapse;margin-bottom:24px;border-radius:8px;overflow:hidden;border:1px solid #333">
      ${th('Our WhatsApp Numbers')}
      <tr style="background:#333"><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Name</th><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Number</th></tr>
      ${waOurRows}
    </table>
    <table style="width:100%;border-collapse:collapse;margin-bottom:24px;border-radius:8px;overflow:hidden;border:1px solid #333">
      ${th('Customer WhatsApp Numbers')}
      <tr style="background:#333"><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Name</th><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Number</th></tr>
      ${waYourRows}
    </table>
    <table style="width:100%;border-collapse:collapse;border-radius:8px;overflow:hidden;border:1px solid #333">
      ${th('Platform Login Credentials')}
      <tr style="background:#333"><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Platform</th><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Username</th><th style="padding:8px 16px;text-align:left;font-size:12px;color:#b8b0a0">Password</th></tr>
      ${platRows}
    </table>
  </div>
  <div style="background:#1a1a1a;padding:16px 32px;border-top:1px solid #333;font-size:12px;color:#6a6050">
    This email was automatically generated by the Strategy Cues Onboarding Form.
  </div>
</div>`;
}

/* â”€â”€ Submit â”€â”€ */
async function submitForm() {
  const emailVal = g('official-email');
  if (!emailVal) {
    toast('âš  Please enter the Official Email ID first'); 
    document.getElementById('official-email').focus(); 
    return;
  }

  const btn = document.getElementById('submit-btn');
  btn.disabled = true;
  btn.innerHTML = '<span class="spinner"></span> Submittingâ€¦';

  const data = collect();

  // â”€â”€ Event 1: Success message â”€â”€
  setTimeout(() => {
    openOv('overlay-success');
  }, 400);

  // â”€â”€ Event 2: Send email â”€â”€
  if (ejsConfig.publicKey && ejsConfig.serviceId && ejsConfig.templateId) {
    // EmailJS configured â€” send via API
    try {
      const plainText = [
        'ONBOARDING SUBMISSION â€” ' + new Date().toLocaleString(),
        '', 'Official Email: ' + data.officialEmail,
        'Phone Name: ' + data.phoneName,
        'Phone (Verification): ' + data.phoneNumber,
        '', 'Our WhatsApp:',
        ...data.ourWA.map(w => '  ' + w.name + ': ' + w.number),
        '', 'Customer WhatsApp:',
        ...data.yourWA.map(w => '  ' + w.name + ': ' + w.number),
        '', 'Platform Credentials:',
        ...data.platforms.map(p => '  ' + p.platform + ' | User: ' + p.username + ' | Pwd: ' + p.password)
      ].join('\n');

      await emailjs.send(ejsConfig.serviceId, ejsConfig.templateId, {
        to_email: notifEmail,
        subject:  'Onboarding Submission â€” ' + data.officialEmail,
        message:  plainText
      });
      document.getElementById('success-note').textContent = 'âœ“ Email sent to ' + notifEmail;
    } catch (err) {
      console.error('EmailJS error:', err);
      document.getElementById('success-note').textContent = 'âš  Email delivery failed. Check EmailJS config.';
    }
  } else {
    // Fallback: open mailto (works when opened in a real browser, not sandboxed preview)
    const subj = encodeURIComponent('Onboarding Submission â€” ' + data.officialEmail);
    const body = encodeURIComponent([
      'ONBOARDING SUBMISSION', 'Date: ' + new Date().toLocaleString(), '',
      'Official Email: ' + data.officialEmail,
      'Phone Name: ' + data.phoneName,
      'Phone (Verification): ' + data.phoneNumber,
      '', 'Our WhatsApp:',
      ...(data.ourWA.length ? data.ourWA.map(w => '  ' + w.name + ': ' + w.number) : ['  (none)']),
      '', 'Customer WhatsApp:',
      ...(data.yourWA.length ? data.yourWA.map(w => '  ' + w.name + ': ' + w.number) : ['  (none)']),
      '', 'Platform Credentials:',
      ...(data.platforms.length ? data.platforms.map(p => '  ' + p.platform + ' | ' + p.username + ' / ' + p.password) : ['  (none)'])
    ].join('\n'));

    // Open in a new window to avoid blocked-content error in iframes
    const mailLink = 'mailto:' + notifEmail + '?subject=' + subj + '&body=' + body;
    const win = window.open(mailLink, '_blank');
    if (!win) {
      // If popup blocked, create a visible link
      document.getElementById('success-note').innerHTML =
        'ðŸ“§ <a href="' + mailLink + '" style="color:var(--gold)">Click here to open your email client</a> and send to ' + notifEmail + '<br><small style="color:var(--text3)">Or set up EmailJS via "Email API Setup" for automatic delivery.</small>';
    } else {
      document.getElementById('success-note').textContent = 'Your email client has been opened with all details pre-filled for ' + notifEmail;
    }
  }

  btn.disabled = false;
  btn.innerHTML = 'Submit';
}

/* â”€â”€ Utilities â”€â”€ */
function g(id) { return document.getElementById(id)?.value?.trim() || ''; }

function toast(msg) {
  const el = document.createElement('div');
  el.className = 'flash'; el.textContent = msg;
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 2800);
}
</script>
</body>
</html>
